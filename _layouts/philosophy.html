---
layout: default
---

<style>
  :root {
    --reader-bg:   #1e2a1e; /* deep olive */
    --reader-text: #f1e9d2; /* warm ivory text */
    --reader-max-w: 56rem;
    --reader-font-body: Georgia, serif;
    --reader-font-title: "EB Garamond", serif;
    --reader-font-size: 1rem;
  }

  .content-box {
    background-color: var(--reader-bg);
    color: var(--reader-text);
    max-width: var(--reader-max-w);
    font-family: var(--reader-font-body);
    font-size: var(--reader-font-size);
    border-radius: 1rem;
    padding: 2rem;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.4);
  }

  .content-box p {
    line-height: 1.7;
  }

  .content-box h1,
  .content-box h2,
  .content-box h3,
  .content-box h4,
  .content-box h5,
  .content-box h6 {
    margin-top: 1.5rem;
    font-weight: bold;
    font-family: var(--reader-font-title);
  }
</style>

<main class="content-box px-6 py-8 mx-auto relative">
  <button id="readerOptions" class="absolute top-2 right-2">
    <img src="{{ '/images/navigation.png' | relative_url }}" alt="Options" class="w-6 h-6">
  </button>
  {{ content }}
  <div id="optionsMenu" class="hidden absolute top-10 right-2 rounded-lg shadow-lg p-4 space-y-2" style="background:var(--reader-bg);color:var(--reader-text)">
    <div class="font-bold">Color Scheme</div>
    <button data-scheme="olive" class="block w-full text-left">Olive</button>
    <button data-scheme="duskrose" class="block w-full text-left">Duskrose</button>
    <button data-scheme="dark" class="block w-full text-left">Dark</button>
    <button data-scheme="blue" class="block w-full text-left">Blue</button>
    <button data-scheme="sepia" class="block w-full text-left">Sepia</button>
    <div class="font-bold mt-3">Font Style</div>
    <button data-font="classic" class="block w-full text-left">Classic Serif</button>
    <button data-font="modern" class="block w-full text-left">Modern Serif</button>
    <button data-font="humanist" class="block w-full text-left">Humanist Sans</button>
    <button data-font="mono" class="block w-full text-left">Literary Monospace</button>
    <div class="font-bold mt-3">Font Size</div>
    <button data-fsize="small"   class="block w-full text-left">Small</button>
    <button data-fsize="default" class="block w-full text-left">Default</button>
    <button data-fsize="large"   class="block w-full text-left">Large</button>
    <button data-fsize="huge"    class="block w-full text-left">Huge</button>
    <div class="font-bold mt-3">Reader Size</div>
    <button data-size="narrow" class="block w-full text-left">Narrow</button>
    <button data-size="medium" class="block w-full text-left">Medium</button>
    <button data-size="wide" class="block w-full text-left">Wide</button>
    <button id="resetOptions" class="block w-full text-left mt-2">Reset</button>
  </div>
</main>

<script>
  const optsBtn  = document.getElementById('readerOptions');
  const optsMenu = document.getElementById('optionsMenu');
  if (optsBtn && optsMenu) {
    optsBtn.addEventListener('click', () => optsMenu.classList.toggle('hidden'));
  }

  const schemes = {
  olive: { bg: '#192519', text: '#f1e9d2' },         // dark olive green
  duskrose: { bg: '#4a263a', text: '#fbecea' },           // deep muted rose/brown-purple
  dark: { bg: '#000000', text: '#ffffff' },             // black and white
  blue: { bg: '#001f2b', text: '#fdf6e3' },             // deep solarized blue
  sepia: { bg: '#d6c7a4', text: '#3b2f23' }           // slightly dark sepia 
};


  const widths = {
    narrow: '40rem',
    medium: '56rem',
    wide:   '72rem'
  };

  const fonts = {
    classic:  { body: 'Georgia, serif',                      title: '"EB Garamond", serif' },
    modern:   { body: '\'Lora\', serif',                     title: '\'Playfair Display\', serif' },
    humanist: { body: '\'Source Sans Pro\', sans-serif',     title: '\'Libre Franklin\', sans-serif' },
    mono:     { body: '\'IBM Plex Mono\', monospace',        title: '\'Fira Sans Condensed\', sans-serif' }
  };

  const sizes = {
    small:   '0.875rem',
    default: '1rem',
    large:   '1.125rem',
    huge:    '1.25rem'
  };

  function storageSet(key, val) {
    try {
      localStorage.setItem(key, val);
    } catch(e) {
      document.cookie = `${key}=${val};path=/`;
    }
  }

  function storageGet(key) {
    try {
      return localStorage.getItem(key);
    } catch(e) {
      const m = document.cookie.match(new RegExp('(^|;)\\s*'+key+'=([^;]+)'));
      return m ? m[2] : null;
    }
  }

  function applyFontStyle(name) {
    const f = fonts[name];
    if (!f) return;
    document.documentElement.style.setProperty('--reader-font-body', f.body);
    document.documentElement.style.setProperty('--reader-font-title', f.title);
    storageSet('readerFontStyle', name);
  }

  function applyFontSize(name) {
    const s = sizes[name];
    if (!s) return;
    document.documentElement.style.setProperty('--reader-font-size', s);
    storageSet('readerFontSize', name);
  }

  document.querySelectorAll('[data-scheme]').forEach(btn => {
    btn.addEventListener('click', () => {
      const s = schemes[btn.dataset.scheme];
      if (s) {
        document.documentElement.style.setProperty('--reader-bg', s.bg);
        document.documentElement.style.setProperty('--reader-text', s.text);
        optsMenu.classList.add('hidden');
      }
    });
  });

  document.querySelectorAll('[data-size]').forEach(btn => {
    btn.addEventListener('click', () => {
      const w = widths[btn.dataset.size];
      if (w) {
        document.documentElement.style.setProperty('--reader-max-w', w);
        optsMenu.classList.add('hidden');
      }
    });
  });

  document.querySelectorAll('[data-font]').forEach(btn => {
    btn.addEventListener('click', () => {
      applyFontStyle(btn.dataset.font);
      optsMenu.classList.add('hidden');
    });
  });

  document.querySelectorAll('[data-fsize]').forEach(btn => {
    btn.addEventListener('click', () => {
      applyFontSize(btn.dataset.fsize);
      optsMenu.classList.add('hidden');
    });
  });

  const resetBtn = document.getElementById('resetOptions');
  if (resetBtn) {
    resetBtn.addEventListener('click', () => {
      document.documentElement.style.setProperty('--reader-bg', schemes.olive.bg);
      document.documentElement.style.setProperty('--reader-text', schemes.olive.text);
      document.documentElement.style.setProperty('--reader-max-w', widths.medium);
      applyFontStyle('classic');
      applyFontSize('default');
      optsMenu.classList.add('hidden');
    });
  }

  // Apply saved preferences
  const savedFont = storageGet('readerFontStyle');
  if (savedFont && fonts[savedFont]) {
    applyFontStyle(savedFont);
  }
  const savedSize = storageGet('readerFontSize');
  if (savedSize && sizes[savedSize]) {
    applyFontSize(savedSize);
  }
</script>
